
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="测试总结">
      
      
        <meta name="author" content="姜侠客">
      
      
        <link rel="canonical" href="https://example.com/jmeter/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../about/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Jmeter - EtherealBoyJiang</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#jmeter" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href=".." title="EtherealBoyJiang" class="md-header__button md-logo" aria-label="EtherealBoyJiang" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EtherealBoyJiang
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Jmeter
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo"  aria-label="切换深色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换深色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="green"  aria-label="切换浅色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换浅色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  最近文章

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
    
  
  教程

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../about/" class="md-tabs__link">
        
  
    
  
  关于

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="EtherealBoyJiang" class="md-nav__button md-logo" aria-label="EtherealBoyJiang" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    EtherealBoyJiang
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    最近文章
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    教程
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            教程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Jmeter
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Jmeter
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      前言
    </span>
  </a>
  
    <nav class="md-nav" aria-label="前言">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jmeter_1" class="md-nav__link">
    <span class="md-ellipsis">
      关于Jmeter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jmeter_2" class="md-nav__link">
    <span class="md-ellipsis">
      我们为什么使用Jmeter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      主要组件介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      工作流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jmeter_3" class="md-nav__link">
    <span class="md-ellipsis">
      JMeter 环境安装及配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="JMeter 环境安装及配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jdk" class="md-nav__link">
    <span class="md-ellipsis">
      安装JDK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jdk_1" class="md-nav__link">
    <span class="md-ellipsis">
      配置JDK系统变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jmeter_4" class="md-nav__link">
    <span class="md-ellipsis">
      安装Jmeter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      快速使用
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      使用方法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="使用方法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      测试计划的控制面板
    </span>
  </a>
  
    <nav class="md-nav" aria-label="测试计划的控制面板">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      用户定义的变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      独立运行每个线程组
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teardown" class="md-nav__link">
    <span class="md-ellipsis">
      主线程结束后运行tearDown线程组
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      函数测试模式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jarclasspath" class="md-nav__link">
    <span class="md-ellipsis">
      添加目录或jar包到classpath
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      线程组
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线程组">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      执行顺序
    </span>
  </a>
  
    <nav class="md-nav" aria-label="执行顺序">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      不同类型线程组的执行顺序
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      同类型线程组的执行顺序
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      线程组的控制面板
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线程组的控制面板">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      取样器错误后执行的动作
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      线程数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ramp-up" class="md-nav__link">
    <span class="md-ellipsis">
      ramp-up时间
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      循环次数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#same-user-on-each-iteration" class="md-nav__link">
    <span class="md-ellipsis">
      same user on each iteration（在每次迭代中使用相同的用户）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="same user on each iteration（在每次迭代中使用相同的用户）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      非参数化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      参数化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      前言
    </span>
  </a>
  
    <nav class="md-nav" aria-label="前言">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jmeter_1" class="md-nav__link">
    <span class="md-ellipsis">
      关于Jmeter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jmeter_2" class="md-nav__link">
    <span class="md-ellipsis">
      我们为什么使用Jmeter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      主要组件介绍
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      工作流程
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jmeter_3" class="md-nav__link">
    <span class="md-ellipsis">
      JMeter 环境安装及配置
    </span>
  </a>
  
    <nav class="md-nav" aria-label="JMeter 环境安装及配置">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jdk" class="md-nav__link">
    <span class="md-ellipsis">
      安装JDK
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jdk_1" class="md-nav__link">
    <span class="md-ellipsis">
      配置JDK系统变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jmeter_4" class="md-nav__link">
    <span class="md-ellipsis">
      安装Jmeter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      快速使用
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      使用方法
    </span>
  </a>
  
    <nav class="md-nav" aria-label="使用方法">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      测试计划的控制面板
    </span>
  </a>
  
    <nav class="md-nav" aria-label="测试计划的控制面板">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      用户定义的变量
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      独立运行每个线程组
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#teardown" class="md-nav__link">
    <span class="md-ellipsis">
      主线程结束后运行tearDown线程组
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      函数测试模式
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jarclasspath" class="md-nav__link">
    <span class="md-ellipsis">
      添加目录或jar包到classpath
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      线程组
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线程组">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      执行顺序
    </span>
  </a>
  
    <nav class="md-nav" aria-label="执行顺序">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      不同类型线程组的执行顺序
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      同类型线程组的执行顺序
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      线程组的控制面板
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线程组的控制面板">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      取样器错误后执行的动作
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      线程数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ramp-up" class="md-nav__link">
    <span class="md-ellipsis">
      ramp-up时间
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      循环次数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#same-user-on-each-iteration" class="md-nav__link">
    <span class="md-ellipsis">
      same user on each iteration（在每次迭代中使用相同的用户）
    </span>
  </a>
  
    <nav class="md-nav" aria-label="same user on each iteration（在每次迭代中使用相同的用户）">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      非参数化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      参数化
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="jmeter">JMeter教程</h1>
<p><img alt="" src="../image/Jmeter/0.png" /></p>
<div>
<br>
</div>

<h2 id="_1">前言</h2>
<hr />
<p>为什么要撰写这样一个教程呢？</p>
<p>原因如下：</p>
<ul>
<li>深入学习Jmeter</li>
</ul>
<p>温故而知新，通过编写教程，我将更深入地学习JMeter。尽管我已经使用JMeter很长时间，但还有许多元件我并不十分了解。为了创作一个详尽且实用的JMeter教程，我需要精通JMeter的各个元件。因此，编写教程的过程成为了我的学习过程，通过反复回顾和整理知识，我能够更全面地掌握JMeter的使用技巧</p>
<ul>
<li>分享知识</li>
</ul>
<p>我深信知识具有强大力量，而这种力量应该共享。我愿意将我的所学分享给志同道合的朋友——也就是你们。通过分享知识，我不仅能够为他人提供帮助，还能够在这个过程中体验到一种内在的满足感。</p>
<ul>
<li>结识朋友</li>
</ul>
<p>这是我的第一个教程，后续也会编辑更多的教程。希望能通过这一行为与各位取得交流，与大家一起讨论更多的事情。</p>
<hr />
<div class="admonition attention">
<p class="admonition-title">注意：</p>
<p>此教程基于Jmeter-5.6.2版本。</p>
</div>
<hr />
<p>此教程的部分内容引用来源如下：</p>
<blockquote>
<p><a href="https://www.emqx.com/zh/blog/introduction-to-jmeter-test-components#%E4%B8%80-%E7%BA%BF%E7%A8%8B%E7%BB%84">JMeter 测试组件介绍 | EMQ</a></p>
<p><a href="https://www.niaoge.com/jmeter/jmeter-index.html">鸟哥教程</a></p>
</blockquote>
<div>
<br>
</div>

<h3 id="jmeter_1">关于Jmeter</h3>
<hr />
<p>JMeter是Apache组织开发的基于Java的压力测试工具。用于对软件做压力测试，它最初被设计用于Web应用测试，但后来扩展到其他测试领域。 它可以用于测试静态和动态资源，例如静态文件、Java 小服务程序、CGI 脚本、Java 对象、数据库、FTP 服务器， 等等。</p>
<p>JMeter 可以用于对服务器、网络或对象模拟巨大的负载，来自不同压力类别下测试它们的强度和分析整体性能。</p>
<p>另外，JMeter能够对应用程序做功能/回归测试，通过创建带有断言的脚本来验证你的程序返回了你期望的结果。为了最大限度的灵活性，JMeter允许使用正则表达式创建断言。</p>
<hr />
<p><br></p>
<h3 id="jmeter_2">我们为什么使用Jmeter</h3>
<hr />
<ul>
<li>开源免费，基于Java编写，可集成到其他系统可拓展各个功能插件</li>
<li>支持接口测试，压力测试等多种功能，支持录制回放，入门简单</li>
<li>相较于自己编写框架活其他开源工具，有较为完善的UI界面，便于接口调试</li>
<li>多平台支持，可在Linux，Windows，Mac上运行selenium 是一套完整的web应用程序测试系统，包含了测试的录制（selenium IDE）,编写及运行（Selenium Remote Control）和测试的并行处理（Selenium Grid）。Selenium的核心Selenium Core基于JsUnit，完全由JavaScript编写，因此可以用于任何支持JavaScript的浏览器上。</li>
</ul>
<hr />
<p><br></p>
<h3 id="_2">主要组件介绍</h3>
<hr />
<p><strong>（1）测试计划(Test Plan)</strong></p>
<p>是使用JMeter进行测试的起点，它是其它JMeter测试元件的容器。</p>
<p><strong>（2）线程组(Thread Group)</strong></p>
<p>代表一定数量的并发用户，它可以用来模拟并发用户发送请求。</p>
<p><strong>（3）取样器(sampler)</strong></p>
<p>定义实际的请求内容，被线程组包含，我们主要用HTTP请求。</p>
<p><strong>（4）监听器(Listener)</strong></p>
<p>负责收集测试结果，同时也被告知了结果显示的方式。我们常用的包括：聚合报告、察看结果树、用表格查看结果，都支持将结果数据写入文件。其他的添加上去看看就行。</p>
<p><strong>（5）逻辑控制器(Logic Controller)</strong></p>
<p>可以自定义JMeter发送请求的行为逻辑，它与Sampler结合使用可以模拟复杂的请求序列。</p>
<p>其分为循环控制器和事务控制器。</p>
<p><strong>（6）断言(Assertions)</strong></p>
<p>可以用来判断请求响应的结果是否如用户所期望的。它可以用来隔离问题域，即在确保功能正确的前提下执行压力测试。这个限制对于有效的测试是非常有用的。</p>
<p><strong>（7）配置元件(Config Element)</strong></p>
<p>维护Sampler需要的配置信息，并根据实际的需要会修改请求的内容。我们主要在参数化中用到CSV Data Set Config。</p>
<p><strong>（8）前置处理器(Pre Processors)和后置处理器(Post Processors)</strong></p>
<p>负责在生成请求之前和之后完成工作。前置处理器常常用来修改请求的设置，后置处理器则常常用来处理响应的数据。我们主要在动态关联中用到后置处理器的正则表达式提取器。</p>
<p><strong>（9）定时器(Timer)</strong></p>
<p>负责定义请求之间的延迟间隔。</p>
<p><strong>（10）执行顺序(Execution sequence)</strong></p>
<p>配置元件、前置处理器、定时器、取样器、后置处理器、断言、监听器</p>
<hr />
<p><br></p>
<h3 id="_3">工作流程</h3>
<hr />
<p>JMeter通过模拟一组用户将请求发送到目标服务器。 随后，收集数据以通过各种格式计算目标服务器的统计和显示性能度量。</p>
<p><strong>如下图所示：</strong></p>
<p><img alt="" src="../image/Jmeter/1.png" /></p>
<hr />
<div>
<br>
<br>
</div>

<h2 id="jmeter_3">JMeter 环境安装及配置</h2>
<hr />
<p>JMeter依赖Java环境，如果没事先安装jdk，启动jmeter就会出错误。</p>
<hr />
<p><br></p>
<h3 id="jdk">安装JDK</h3>
<hr />
<p><strong>1.下载JDK</strong></p>
<p>示例环境为Windows11环境，读者应根据实际环境下载JDK的安装包。</p>
<p>JDK下载地址：</p>
<blockquote>
<p><a href="https://www.oracle.com/java/technologies/downloads/#jdk21-windows">Java21 下载</a></p>
</blockquote>
<p>建议下载exe文件，如图：</p>
<p><img alt="" src="../image/Jmeter/2.png" /></p>
<hr />
<p><strong>2.安装JDK</strong></p>
<p>建议在D盘下新建Tools文件夹，JDK安装时更改安装目录为Tools。好处就是方便管理、配置环境变量。</p>
<p><img alt="" src="../image/Jmeter/41.png" /></p>
<p><img alt="" src="../image/Jmeter/42.png" /></p>
<p>接下来就是一直下一步就行。</p>
<hr />
<p><br></p>
<h3 id="jdk_1">配置JDK系统变量</h3>
<hr />
<p>想要使用JDK需要配置环境变量。</p>
<div class="admonition danger">
<p class="admonition-title">警告：</p>
<p>不要随意改动环境变量，否则可能造成系统死机。</p>
</div>
<hr />
<p><strong>1.新建JAVA_HOME系统变量：</strong></p>
<p>变量值就是JDK的安装目录，如图：</p>
<p><img alt="" src="../image/Jmeter/3.png" /></p>
<p><img alt="变量值就是JDK的安装目录路径" src="../image/Jmeter/4.png" /></p>
<hr />
<p><strong>2.Path中新建JAVA_HOME的环境环境</strong></p>
<p>系统变量中找到Path，选中，点击编辑，进入Path系统变量窗口。</p>
<ul>
<li>
<p>新建，输入：</p>
<p>%JAVA_HOME%\bin;</p>
</li>
<li>
<p>新建，输入：</p>
<p>%JAVA_HOME%\jre\bin;</p>
</li>
</ul>
<p>ps：windows11好像不需要输入最后的;</p>
<p>如图：</p>
<p><img alt="" src="../image/Jmeter/5.png" /></p>
<p>最后：</p>
<div class="highlight"><pre><span></span><code>确定-确定-应用-确定
</code></pre></div>
<hr />
<p><br></p>
<h3 id="jmeter_4">安装Jmeter</h3>
<hr />
<p><strong>1.下载JmeterZIP包</strong></p>
<p>JmeterZIP包下载地址：</p>
<blockquote>
<p><a href="https://jmeter.apache.org/download_jmeter.cgi">最新版本Jmeter下载</a></p>
<p><a href="https://archive.apache.org/dist/jmeter/binaries/">历史版本Jmeter下载</a></p>
</blockquote>
<p>建议下载zip.sha512包，如图：</p>
<p><img alt="" src="../image/Jmeter/6.png" /></p>
<hr />
<p><strong>2.解压到目录</strong></p>
<p>建议解压到D:\Tools目录下，如图：</p>
<p><img alt="" src="../image/Jmeter/7.png" /></p>
<hr />
<p><strong>3.汉化Jmeter界面</strong></p>
<p>修改Jmeter目录下bin文件夹内jmeter.properties，推荐使用Notepad++软件进行修改。</p>
<p><strong>language=zh_CN*</strong></p>
<p>如图：</p>
<p><img alt="" src="../image/Jmeter/8.png" /></p>
<hr />
<p><strong>4.发送启动文件到桌面快捷方式</strong></p>
<p>如图：</p>
<p><img alt="" src="../image/Jmeter/9.png" /></p>
<hr />
<p><strong>5.启动Jmeter</strong></p>
<p>桌面双击Jmeter快捷方式，如图：</p>
<p><img alt="" src="../image/Jmeter/43.png" /></p>
<hr />
<p><br></p>
<h3 id="_4">快速使用</h3>
<hr />
<ul>
<li>
<p>右键测试计划--添加--线程(用户)--线程组</p>
</li>
<li>
<p>右键线程组--添加--取样器--HTTP请求</p>
</li>
<li>
<p>点击HTTP请求--输入协议、IP或域名、端口、路径、内容编码，选择请求方式。</p>
</li>
</ul>
<p>示例：</p>
<div class="highlight"><pre><span></span><code>  协议：HTTP IP：127.0.0.1 端口：5000 请求方式：GET 路径：/QuickUse/
</code></pre></div>
<p><img alt="" src="../image/Jmeter/10.png" /></p>
<hr />
<ul>
<li>
<p>右键测试计划--添加--监听器--查看结果树</p>
</li>
<li>
<p>点击上方绿色三角按钮</p>
</li>
<li>
<p>点击查看结果树</p>
</li>
</ul>
<p>响应数据：</p>
<div class="highlight"><pre><span></span><code>  {&quot;code&quot;: 200, &quot;data&quot;: &quot;It is successful!&quot;}
</code></pre></div>
<p><img alt="" src="../image/Jmeter/11.png" /></p>
<hr />
<p><strong>请注意：本文中示例接口仅在本地局域网内可用。后续我可能会将这些接口打包上传到我的 GitHub 仓库中，方便下载和使用。</strong>
<strong>下载后的 ZIP 文件解压后，可在本地运行，你就可以对接口进行请求了。</strong></p>
<hr />
<div>
<br><br>
</div>

<h2 id="_5">使用方法</h2>
<hr />
<p><br></p>
<h3 id="_6">测试计划的控制面板</h3>
<hr />
<p>可以将测试计划可视化为用于运行测试的JMeter脚本。测试计划由测试元素组成，例如线程组，逻辑控制器，样本生成控制器，监听器，定时器，断言和配置元素。 每个测试计划中至少应有一个线程组。 我们可以根据要求添加或删除元素。 上述的快速开始就是一个测试计划。</p>
<p>测试计划控制面板包含：</p>
<ul>
<li>
<p>用户定义的变量</p>
</li>
<li>
<p>独立运行每个线程组</p>
</li>
<li>
<p>主线程结束后运行tearDown线程组</p>
</li>
<li>
<p>函数测试模式</p>
</li>
<li>
<p>添加目录或jar包到classpath</p>
</li>
</ul>
<hr />
<p><br></p>
<h4 id="_7">用户定义的变量</h4>
<hr />
<p>当你在测试计划的多个部分中有重复值时，可使用用户定义变量，它提供了灵活性。</p>
<p>使用${name} 调用。</p>
<hr />
<ul>
<li><strong>添加用户定义的变量</strong></li>
</ul>
<p>名称输入</p>
<div class="highlight"><pre><span></span><code>  UserDefinedVariables
</code></pre></div>
<p>值可以随意输入，我输入的是：</p>
<div class="highlight"><pre><span></span><code>  我是用户定义的变量
</code></pre></div>
<p><img alt="" src="../image/Jmeter/12.png" /></p>
<hr />
<ul>
<li><strong>调用用户定义的变量</strong></li>
</ul>
<p>请求地址：</p>
<div class="highlight"><pre><span></span><code>  HTTP://127.0.0.1:5000/TestPlan/
</code></pre></div>
<p>请求方式：</p>
<div class="highlight"><pre><span></span><code>  POST
</code></pre></div>
<p>消息体数据：</p>
<div class="highlight"><pre><span></span><code>  {&quot;UserDefinedVariables&quot;：&quot;${UserDefinedVariables}&quot;}
</code></pre></div>
<p><img alt="" src="../image/Jmeter/13.png" /></p>
<hr />
<ul>
<li><strong>右键取样器-添加-配置元件-HTTP信息头管理器</strong></li>
</ul>
<p>在HTTP信息头管理器中点击下方添加信息头</p>
<p>名称输入：</p>
<div class="highlight"><pre><span></span><code>  Content-Type
</code></pre></div>
<p>值输入：</p>
<div class="highlight"><pre><span></span><code>  application/json
</code></pre></div>
<p><img alt="" src="../image/Jmeter/24.png" /></p>
<hr />
<ul>
<li><strong>点击上方绿色三角运行后，查看结果树</strong></li>
</ul>
<p>请求参数：</p>
<div class="highlight"><pre><span></span><code>  {&quot;UserDefinedVariables&quot;：&quot;我是用户定义的变量&quot;}
</code></pre></div>
<p><img alt="" src="../image/Jmeter/14.png" /></p>
<hr />
<p><br></p>
<h4 id="_8">独立运行每个线程组</h4>
<p>当一个测试计划中有多个线程组，当多个线程组都是是执行状态时，可能会用到测试计划中的 “独立运行每个线程组”勾选框。</p>
<p>此次示例的后端代码如下：</p>
<div class="highlight"><pre><span></span><code>@api.route(&#39;/TestPlan1/&#39;, methods=[&#39;GET&#39;, &#39;POST&#39;])
def testplan1():
    sleep(3)
    if request.method != &#39;POST&#39;:
        return json.dumps({&#39;code&#39;: 200, &#39;data&#39;: &#39;ERROR: It is TestPlan1 API, you are not POST request!&#39;})
    data = request.get_json()
    if &quot;RunThreadGroupsConsecutively&quot; not in data or &quot;ThreadGroupName&quot; not in data or &quot;RequestTime&quot; not in data:
        return json.dumps({&#39;code&#39;: 400, &#39;data&#39;: &#39;The request body is error!&#39;})
    return json.dumps({&#39;code&#39;: 200,
                       &#39;data&#39;: &#39;Your request parameters is &#39; + &#39;&quot;RunThreadGroupsConsecutively:&#39;
                               + data[&#39;RunThreadGroupsConsecutively&#39;] + &#39;&quot;, &quot;ThreadGroupName&quot;: &quot;&#39; + data[
                                   &#39;ThreadGroupName&#39;] + &#39;&quot;, &quot;RequestTime&quot;: &quot;&#39; + data[&#39;RequestTime&#39;] + &#39;&quot;&#39;})
</code></pre></div>
<p>我把接口设置了休眠三秒，即接口在接收到请求数据三秒后，返回响应数据。</p>
<hr />
<p>Jmeter脚本如下：</p>
<ul>
<li>第一个线程组：测试计划-独立运行每个线程组-1</li>
</ul>
<p>请求地址：</p>
<div class="highlight"><pre><span></span><code>HTTP://127.0.0.1:5000/TestPlan1/
</code></pre></div>
<p>请求方式：</p>
<div class="highlight"><pre><span></span><code>POST
</code></pre></div>
<p>消息体数据：</p>
<div class="highlight"><pre><span></span><code>{&quot;RunThreadGroupsConsecutively&quot;:&quot;未勾选/勾选&quot;,&quot;ThreadGroupName&quot;:&quot;测试计划-独立运行每个线程组-1&quot;,&quot;RequestTime&quot;:&quot;${__time(yyyy-MM-dd hh:mm:ss,now)}&quot;}
</code></pre></div>
<p>${__time(yyyy-MM-dd hh<img alt="🇲🇲" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f1f2-1f1f2.svg" title=":mm:" />ss,now)}的作用是发送请求时，引用当时时间，格式为2020-06-23 14:57:56，后面讲到函数时再详细阐述。</p>
<p>在HTTP信息头管理器中点击下方添加信息头：</p>
<p>名称输入：</p>
<div class="highlight"><pre><span></span><code>Content-Type
</code></pre></div>
<p>值输入：</p>
<div class="highlight"><pre><span></span><code>application/json
</code></pre></div>
<hr />
<ul>
<li>第二个线程组：测试计划-独立运行每个线程组-2</li>
</ul>
<p>请求地址：</p>
<div class="highlight"><pre><span></span><code>HTTP://127.0.0.1:5000/TestPlan1/
</code></pre></div>
<p>请求方式：</p>
<div class="highlight"><pre><span></span><code>POST
</code></pre></div>
<p>消息体数据：</p>
<div class="highlight"><pre><span></span><code>{&quot;RunThreadGroupsConsecutively&quot;:&quot;未勾选/勾选&quot;,&quot;ThreadGroupName&quot;:&quot;测试计划-独立运行每个线程组-2&quot;,&quot;RequestTime&quot;:&quot;${__time(yyyy-MM-dd hh:mm:ss,now)}&quot;}
</code></pre></div>
<p>在HTTP信息头管理器中点击下方添加信息头</p>
<p>名称输入：</p>
<div class="highlight"><pre><span></span><code>Content-Type
</code></pre></div>
<p>值输入：</p>
<div class="highlight"><pre><span></span><code>application/json
</code></pre></div>
<hr />
<p><br></p>
<ul>
<li><strong>不勾选时的执行顺序如下：测试计划中的多个线程组按照并发逻辑进行请求（同时请求）</strong></li>
</ul>
<p>运行后查看结果树：</p>
<p>测试计划-独立运行每个线程组-1</p>
<p>请求参数：</p>
<div class="highlight"><pre><span></span><code>  {&quot;RunThreadGroupsConsecutively&quot;:&quot;未勾选&quot;,&quot;ThreadGroupName&quot;:&quot;测试计划-独立运行每个线程组-1&quot;,&quot;RequestTime&quot;:&quot;2024-01-03 04:27:16&quot;}
</code></pre></div>
<p>请求时间是2024-01-03 04:27:16</p>
<p><img alt="" src="../image/Jmeter/16.png" /></p>
<p>测试计划-独立运行每个线程组-2：</p>
<p>请求参数：</p>
<div class="highlight"><pre><span></span><code>{&quot;RunThreadGroupsConsecutively&quot;:&quot;未勾选&quot;,&quot;ThreadGroupName&quot;:&quot;测试计划-独立运行每个线程组-2&quot;,&quot;RequestTime&quot;:&quot;2024-01-03 04:27:16&quot;}
</code></pre></div>
<p>请求时间是2024-01-03 04:27:16</p>
<p><img alt="" src="../image/Jmeter/18.png" /></p>
<p>可以看出两个线程组发出请求的时间相同，两个线程组是并发请求。</p>
<hr />
<ul>
<li><strong>勾选时执行顺序如下：测试计划中的多个线程组按照串行逻辑进行请求（顺序请求）</strong></li>
</ul>
<p>运行后查看结果树：</p>
<p>测试计划-独立运行每个线程组-1</p>
<p>请求参数：</p>
<div class="highlight"><pre><span></span><code>{&quot;RunThreadGroupsConsecutively&quot;:&quot;勾选&quot;,&quot;ThreadGroupName&quot;:&quot;测试计划-独立运行每个线程组-1&quot;,&quot;RequestTime&quot;:&quot;2024-01-03 04:40:31&quot;}
</code></pre></div>
<p>请求时间是2024-01-03 04:40:31</p>
<p><img alt="" src="../image/Jmeter/19.png" /></p>
<p>测试计划-独立运行每个线程组-2</p>
<p>请求参数：</p>
<div class="highlight"><pre><span></span><code>{&quot;RunThreadGroupsConsecutively&quot;:&quot;勾选&quot;,&quot;ThreadGroupName&quot;:&quot;测试计划-独立运行每个线程组-2&quot;,&quot;RequestTime&quot;:&quot;2024-01-03 04:40:34&quot;}
</code></pre></div>
<p>请求时间是2024-01-03 04:40:34</p>
<p><img alt="" src="../image/Jmeter/20.png" /></p>
<p>可以看出两个线程组发出请求的时间相隔3秒，正是接口中休眠的3秒，两个线程组是顺序请求。</p>
<hr />
<p><br></p>
<h4 id="teardown">主线程结束后运行tearDown线程组</h4>
<hr />
<p>主要应用于普通线程配置在取样器错误后要执行的动作选择停止测试或立即停止测试时。</p>
<p>如果勾选此项，普通线程因取样器错误结束执行时，会继续执行tearDown线程。</p>
<p>右键测试计划-添加-线程-tearDown线程组。</p>
<hr />
<p>Jmeter脚本如下：</p>
<p>测试计划-错误线程:</p>
<p>线程组控制面板内，在取样器错误后要执行的动作中，勾选停止或立即停止</p>
<p>请求地址输入无法访问的地址：</p>
<div class="highlight"><pre><span></span><code>HTTP://127.127.5.1:5000/T/
</code></pre></div>
<hr />
<p>测试计划-主线程结束后运行tearDown线程组：</p>
<p>请求地址：</p>
<div class="highlight"><pre><span></span><code>HTTP://127.0.0.1:5000/TestPlan1/
</code></pre></div>
<p>请求方式：</p>
<div class="highlight"><pre><span></span><code>POST
</code></pre></div>
<p>消息体数据：</p>
<div class="highlight"><pre><span></span><code>{&quot;RunThreadGroupsConsecutively&quot;:&quot;未勾选/勾选&quot;,&quot;ThreadGroupName&quot;:&quot;测试计划-独立运行每个线程组-2&quot;,&quot;RequestTime&quot;:&quot;${__time(yyyy-MM-dd hh:mm:ss,now)}&quot;}
</code></pre></div>
<p>在HTTP信息头管理器中点击下方添加信息头</p>
<p>名称输入：</p>
<div class="highlight"><pre><span></span><code>Content-Type
</code></pre></div>
<p>值输入：</p>
<div class="highlight"><pre><span></span><code>application/json
</code></pre></div>
<hr />
<ul>
<li>勾选主线程结束后运行tearDown线程组</li>
</ul>
<p>运行后查看结果树：</p>
<p><img alt="" src="../image/Jmeter/22.png" /></p>
<p>可以看出在取样器错误的情况下，仍执行tearDown线程组</p>
<hr />
<ul>
<li>不勾选主线程结束后运行tearDown线程组</li>
</ul>
<p>运行后查看结果树：</p>
<p><img alt="" src="../image/Jmeter/23.png" /></p>
<p>可以看出在取样器错误的情况下，不再执行tearDown线程组</p>
<hr />
<p><br></p>
<h4 id="_9">函数测试模式</h4>
<hr />
<p>因极少使用，现在先不阐述，待日后更新</p>
<hr />
<p><br></p>
<h4 id="jarclasspath">添加目录或jar包到classpath</h4>
<p>添加文件或jar包，此功能最常用于调用外部jar包。当脚本需要调用外部的java文件或jar包时，可以把jar包路径添加到这里，然后就可以在beanshell中直接import进来，并调用jar包中的方法。</p>
<p>后续讲到beanshell时，再阐述用法。</p>
<hr />
<p><br></p>
<h3 id="_10">线程组</h3>
<hr />
<p>线程组元件是所有测试计划的入口。所有的取样器和控制器必须放在线程组下。一个线程组可以看作一个虚拟用户池，其中的每个线程都可以理解为一个虚拟用户，多个虚拟用户同时去执行相同的一批次任务。每个线程之间都是隔离的，互不影响的。一个线程的执行过程中，操作的变量不会影响其他线程的变量值。 </p>
<p>线程组包含:</p>
<ul>
<li>线程组(普通线程组)</li>
<li>setup线程组</li>
<li>tearDown 线程组</li>
<li>开放模型线程组</li>
</ul>
<hr />
<p><br></p>
<h4 id="_11">执行顺序</h4>
<hr />
<h5 id="_12">不同类型线程组的执行顺序</h5>
<p>setup线程组&gt;线程组(普通线程组)=开放模型线程组&gt;tearDown 线程组</p>
<hr />
<p>Jmeter脚本如下：</p>
<hr />
<p>setup线程组(默认面板)：</p>
<p>请求地址：</p>
<div class="highlight"><pre><span></span><code>HTTP://127.0.0.1:5000/QuickUse/
</code></pre></div>
<p>请求方式：</p>
<div class="highlight"><pre><span></span><code>GET
</code></pre></div>
<p>添加参数：</p>
<p>名称：</p>
<div class="highlight"><pre><span></span><code>date
</code></pre></div>
<p>值：</p>
<div class="highlight"><pre><span></span><code>${__time(yyyy-MM-dd%hh:mm:ss,now)}
</code></pre></div>
<hr />
<p>线程组(默认面板)：</p>
<p>请求地址：</p>
<div class="highlight"><pre><span></span><code>HTTP://127.0.0.1:5000/TestPlan/
</code></pre></div>
<p>请求方式：</p>
<div class="highlight"><pre><span></span><code>POST
</code></pre></div>
<p>消息体数据：</p>
<div class="highlight"><pre><span></span><code>{&quot;UserDefinedVariables&quot;:&quot;${__time(yyyy-MM-dd hh:mm:ss,now)}&quot;}
</code></pre></div>
<p>在HTTP信息头管理器中点击下方添加信息头</p>
<p>名称输入：</p>
<div class="highlight"><pre><span></span><code>Content-Type
</code></pre></div>
<p>值输入：</p>
<div class="highlight"><pre><span></span><code>application/json
</code></pre></div>
<p>右键取样器-添加-定时器-固定定时器(作用是延迟线程组或取样器工作的时间)</p>
<p>线程延迟输入(单位毫秒)：</p>
<div class="highlight"><pre><span></span><code>3000
</code></pre></div>
<hr />
<p>tearDwon线程组(默认面板)</p>
<p>请求地址：</p>
<div class="highlight"><pre><span></span><code>HTTP://127.0.0.1:5000/TestPlan1/
</code></pre></div>
<p>请求方式：</p>
<div class="highlight"><pre><span></span><code>POST
</code></pre></div>
<p>消息体数据：</p>
<div class="highlight"><pre><span></span><code>{&quot;RunThreadGroupsConsecutively&quot;:&quot;1&quot;, &quot;ThreadGroupName&quot;:&quot;tearDown线程组&quot;, &quot;RequestTime&quot;:&quot;${__time(yyyy-MM-dd hh:mm:ss,now)}&quot;}
</code></pre></div>
<p>在HTTP信息头管理器中点击下方添加信息头</p>
<p>名称输入：</p>
<div class="highlight"><pre><span></span><code>Content-Type
</code></pre></div>
<p>值输入：</p>
<div class="highlight"><pre><span></span><code>application/json
</code></pre></div>
<p>右键取样器-添加-定时器-固定定时器(作用是延迟线程组或取样器工作的时间)</p>
<p>线程延迟输入(单位毫秒)：</p>
<div class="highlight"><pre><span></span><code>3000
</code></pre></div>
<hr />
<p>运行后查看结果树：</p>
<hr />
<p>setup线程组：</p>
<p>请求参数：</p>
<div class="highlight"><pre><span></span><code>?date=2024-01-04%04:19:12
</code></pre></div>
<p>请求时间是2024-01-04 04:19:12</p>
<p><img alt="" src="../image/Jmeter/25.png" /></p>
<hr />
<p>线程组：</p>
<p>请求参数：</p>
<div class="highlight"><pre><span></span><code>{&quot;UserDefinedVariables&quot;:&quot;2024-01-04 04:19:15&quot;}
</code></pre></div>
<p>请求时间是2024-01-04 04:19:15</p>
<p><img alt="" src="../image/Jmeter/26.png" /></p>
<hr />
<p>tearDown线程组：</p>
<p>请求参数：</p>
<div class="highlight"><pre><span></span><code>{&quot;RunThreadGroupsConsecutively&quot;:&quot;1&quot;, &quot;ThreadGroupName&quot;:&quot;tearDown线程组&quot;, &quot;RequestTime&quot;:&quot;2024-01-04 04:19:18&quot;}
</code></pre></div>
<p>请求时间是2024-01-04 04:19:18</p>
<p><img alt="" src="../image/Jmeter/27.png" /></p>
<hr />
<p>可以看出它们之间各隔3秒(固定定时器延迟3秒)，是按照setup线程组&gt;线程组(普通线程组)&gt;tearDown 线程组的顺序。</p>
<p>开放模型线程组与线程组优先级一样，在此不再演示。</p>
<hr />
<h5 id="_13">同类型线程组的执行顺序</h5>
<hr />
<p>需搭配 测试计划面板中的 ‘独立运行每个线程组’。</p>
<hr />
<ul>
<li>
<p>勾选时，同类型线程组顺序请求</p>
</li>
<li>
<p>未勾选时，同类型线程组随机请求，时间大致一样(伪并发)</p>
</li>
</ul>
<p>上面在测试计划篇章中，以线程组进行过演示。</p>
<p>其它线程组同类型下与线程组逻辑一致，不再进行演示。</p>
<hr />
<p><br></p>
<h4 id="_14">线程组的控制面板</h4>
<hr />
<p>这三种类型的线程组的控制面板基本一致，包括：</p>
<ul>
<li>
<p>取样器错误后执行的动作</p>
</li>
<li>
<p>线程数</p>
</li>
<li>
<p>Ramp-Up时间(秒)</p>
</li>
<li>
<p>循环次数</p>
</li>
<li>
<p>Same user on each iteration(在每次迭代中使用相同的用户)</p>
</li>
<li>
<p>调度器</p>
</li>
</ul>
<p>线程组的控制面板多一个：</p>
<ul>
<li>延迟创建线程直到需要</li>
</ul>
<hr />
<h5 id="_15">取样器错误后执行的动作</h5>
<p>这几个配置项控制了「当遇到错误的时候测试的执行策略」是否会继续执行。</p>
<p>示例中取样器皆在同一线程组下。</p>
<hr />
<ul>
<li>继续：忽略错误，继续执行</li>
</ul>
<p>示例取样器在同一线程组下。</p>
<hr />
<p>jmeter脚本如下：</p>
<hr />
<p>错误取样器:</p>
<p>请求地址输入无法访问的地址：</p>
<div class="highlight"><pre><span></span><code>HTTP://127.127.5.1:5000/Test/
</code></pre></div>
<hr />
<p>正确取样器：</p>
<p>请求地址：</p>
<div class="highlight"><pre><span></span><code>  HTTP://127.127.5.1:5000/QuickUse/
</code></pre></div>
<p>请求方式：</p>
<div class="highlight"><pre><span></span><code>  GET
</code></pre></div>
<p>右键取样器-添加-定时器-固定定时器(作用是延迟线程组或取样器工作的时间)</p>
<p>线程延迟输入(单位毫秒)：</p>
<div class="highlight"><pre><span></span><code>3000
</code></pre></div>
<hr />
<p>运行后查看结果树：</p>
<p><img alt="" src="../image/Jmeter/28.png" /></p>
<p>可以看出第一个取样器错误，对第二个取样器无影响。</p>
<hr />
<p>示例为同一线程组下。那么在不同线程组下呢？</p>
<p>无论是在同一线程组下，还是同类型的不同线程组下，或是不同类型的的不同线程组下。线程组勾选继续时，那么该线程组下的某一取样器执行错误后，对该线程的其他取样器的执行与其他线程组的执行无影响。</p>
<hr />
<ul>
<li>启动下一进程循环： 忽略错误，线程当前循环终止，执行下一个循环。</li>
</ul>
<p>在线程组控制面板-循环次数中输入4。它代表着该线程组会循环执行4次。</p>
<hr />
<p>Jmeter脚本与 ’取样器错误后执行的动作’ 中示例一致。</p>
<hr />
<p>运行后查看结果树：</p>
<p><img alt="" src="../image/Jmeter/29.png" /></p>
<p>可以看出第一个取样器错误后，中断此次循环，第二个取样器无法执行。然后线程组开始执行下一次循环线程。</p>
<hr />
<p>此选项只会影响当前线程组，对其他线程组无影响。</p>
<hr />
<ul>
<li>停止线程：当前线程停止执行，不影响其他线程正常执行。</li>
</ul>
<hr />
<p>Jmeter脚本在 ‘启动下一进程循环： 忽略错误，线程当前循环终止，执行下一个循环。’ 的基础上增加一个线程组，该线程组也设置循环次数为4，勾选停止线程。但线程组内复制正确取样器。(点击选中正确取样器，Ctrl+c，然后点击选中该线程组Ctrl+v)</p>
<hr />
<p>运行后查看结果树：</p>
<p><img alt="" src="../image/Jmeter/30.png" /></p>
<p>可以看出。第一个线程组第一次循环中因取样器错误执行，当前线程组结束执行。第二个线程组不受影响，4次循环执行完毕。</p>
<hr />
<p>此选项只会影响当前线程组，对其他线程组无影响。</p>
<hr />
<ul>
<li>停止测试：整个测试会在所有当前正在执行的线程执行完毕后停止</li>
</ul>
<p>此选项与测试计划面板中的 ‘独立运行每一个线程组’、‘主线程结束后运行tearDwon线程组’ 的勾选与否，造成的影响不同。</p>
<p>在测试计划篇章，我们已经认识了 ’主线程结束后运行tearDwon线程组‘ 与 ’停止测试‘造成的影响，在此不再阐述。</p>
<hr />
<p>单线程组时，Jmeter脚本与 ’启动下一进程循环： 忽略错误，线程当前循环终止，执行下一个循环。‘ 一致。</p>
<hr />
<p>运行后查看结果树：</p>
<p><img alt="" src="../image/Jmeter/31.png" /></p>
<p>可以看出。第一次循环时，第一个取样器错误执行，由于它是唯一一个线程，整个测试计划被终止。</p>
<hr />
<p>双线程组时，Jmeter脚本与 ’停止线程：当前线程停止执行，不影响其他线程正常执行。‘  一致，测试计划控制面板中不勾选 ‘主线程结束后运行tearDwon线程组’。</p>
<hr />
<p>运行后查看结果树：</p>
<p><img alt="" src="../image/Jmeter/32.png" /></p>
<p>可以看出。第一个线程组，第一次循环中，取样器错误，直接结束整个测试计划。</p>
<hr />
<p>双线程组时，Jmeter脚本与 ’停止线程：当前线程停止执行，不影响其他线程正常执行。‘ 一致，测试计划控制面板中勾选 ‘主线程结束后运行tearDwon线程组’。</p>
<hr />
<p>运行后查看结果树：</p>
<p><img alt="" src="../image/Jmeter/33.png" /></p>
<p>可以看出。第一个线程组，第一次循环中，取样器错误后，等待第二个线程组执行结束后，才结束整个测试计划。</p>
<hr />
<p>示例为同类型的线程组，那么不同类型的setup线程组、线程组、tearDwon线程组搭配呢？</p>
<p>首先要考虑的是它们的执行优先级。</p>
<p>当一个setup线程组中配置停止测试并有取样器执行错误时，不会执行线程组和tearDwon线程组。
  同理，当执行到普通线程组时，有取样器执行错误，也不会执行tearDwon线程组。</p>
<hr />
<ul>
<li>立即停止测试：整个测试会立即停止执行，当前正在执行的取样器可能会被中断。</li>
</ul>
<p>此选项与停止测试不同，只与测试计划面板中的 ‘主线程结束后运行tearDwon线程组’ 的勾选与否，造成的影响不同。</p>
<p>在测试计划篇章，我们已经认识了 ’主线程结束后运行tearDwon线程组‘ 与 ’立即停止测试‘造成的影响，在此不再阐述。</p>
<hr />
<p>立即停止测试的效果与未勾选 ‘主线程结束后运行tearDwon线程组’时的停止测试的效果一致。即只要某一线程组中的某一取样器执行错误，立即停止整个测试计划。
  可以用停止测试示例的脚本进行测试。</p>
<hr />
<p><br></p>
<h5 id="_16">线程数</h5>
<hr />
<p>线程数也就是并发用户数，每个线程将会完全独立地运行测试计划，互不干扰。测试中使用多个线程用于模仿对服务器的并发访问。运行时，Jmeter会先把所有的用户线程构建出来然后逐一发送。(虽然发送间隔非常短，但不是并发。需要添加同步定时器才能模拟出并发效果。)</p>
<hr />
<p>该示例的Jmeter脚本如下：</p>
<p>测试计划中，添加一个线程组。线程组面板中，线程数输入4，其余默认。</p>
<p>线程组中添加一个取样器，取样器如下：</p>
<p>请求地址：</p>
<div class="highlight"><pre><span></span><code>```
HTTP://127.0.0.1:5000/QuickUse/
```
</code></pre></div>
<p>请求方式：</p>
<div class="highlight"><pre><span></span><code>GET
</code></pre></div>
<p>取样器中添加一个固定定时器。</p>
<p>线程延迟：</p>
<div class="highlight"><pre><span></span><code>3000
</code></pre></div>
<hr />
<p>运行后查看结果树：</p>
<p>线程数 1-1</p>
<p><img alt="" src="../image/Jmeter/34.png" /></p>
<p>它的请求时间是2024-01-08 15:56:21</p>
<hr />
<p>线程数 1-4</p>
<p><img alt="" src="../image/Jmeter/35.png" /></p>
<p>它的请求时间是2024-01-08 15:56:22</p>
<hr />
<p>可以看出，虽然我已经设置了2秒的请求延迟（固定定时器），但还是在1秒内，4个用户全部发送了请求。这是因为，这四个用户相互独立，Jmeter运行后，首先构建这4个用户，然后逐一发送，各用户不受其他用户中的固定定时器的影响。</p>
<hr />
<h5 id="ramp-up">ramp-up时间</h5>
<hr />
<p>ramp-up时间用于设置启动所有线程所需要的时间。例如：线程数设置为10，ramp-up时间设置为100秒，那么JMeter将使用100秒使10个用户启动并运行，每个用户将在前一个用户启动后的10秒启动。</p>
<p>如果ramp-up值设置得很小、线程数又设置得很大，刚开始执行测试时会对服务器产生很大的压力。</p>
<hr />
<p>该示例的Jmeter脚本与 ’线程数‘ 示例的脚本一致的基础上，修改 ’ramp-up时间‘ 值。</p>
<p>ramp-up时间：</p>
<div class="highlight"><pre><span></span><code>40
</code></pre></div>
<hr />
<p>运行后查看结果树：</p>
<p>线程数 1-1</p>
<p><img alt="" src="../image/Jmeter/36.png" /></p>
<p>它的请求时间是2024-01-08 16:17:14</p>
<hr />
<p>线程数 1-4</p>
<p><img alt="" src="../image/Jmeter/37.png" /></p>
<p>它的请求时间是2024-01-08 16:17:44</p>
<hr />
<p>可以看出1-4与1-1的请求时间间隔30秒，共四个用户，即每个用户间隔10秒。</p>
<p>即每个用户将在前一个用户启动后(ramp-up时间/用户数)10秒启动。</p>
<hr />
<p><br></p>
<h5 id="_17">循环次数</h5>
<hr />
<p>设置结束前线程组中每个用户循环的次数。</p>
<hr />
<p>该示例的Jmeter脚本与 ’线程数‘ 示例的脚本一致的基础上，修改 ’线程数（用户）‘ 值和循环次数。</p>
<p>线程数：</p>
<div class="highlight"><pre><span></span><code>2
</code></pre></div>
<p>循环次数：</p>
<div class="highlight"><pre><span></span><code>4
</code></pre></div>
<hr />
<p>运行后查看结果树：</p>
<p>第一次循环线程数1-1</p>
<p><img alt="" src="../image/Jmeter/38.png" /></p>
<p>它的请求时间是2024-01-08 16:42:12</p>
<hr />
<p>第四次循环的线程数1-1</p>
<p><img alt="" src="../image/Jmeter/39.png" /></p>
<p>它的请求时间是2024-01-08 16:42:21</p>
<hr />
<p>可以看出，同一用户的4次循环间隔是9秒，即每次循环的间隔是3秒。与固定定时器的时间相同。</p>
<p>循环次数设置为4，即每个用户都会循环两次，该示例有两个用户（线程数），所以会有8个请求结果。</p>
<p>还可以勾选 ’永远‘，一直运行下去。</p>
<hr />
<p><br></p>
<h5 id="same-user-on-each-iteration">same user on each iteration（在每次迭代中使用相同的用户）</h5>
<hr />
<p>在 JMeter 中，user 就是线程，此选项的意思是说每个迭代都用相同的线程。</p>
<p>这个得从老版本讲起，在以前 3.x 和 4.x 版本的 JMeter 中，是没有这个选项的。创建好 1 个线程后，每次迭代都是用这个线程，直到测试结束。它的影响就是，比如登录，加了 HTTP Cookie 管理器以后，单个线程多次迭代（注意不是多个线程哦）登录用的都是相同的 Cookie。</p>
<p>5.x 版本加入了这个选项，可以控制每次迭代是否创建新的线程。同时在 HTTP Cookie 管理器也增加了一个选项，控制是否清除旧 Cookie：</p>
<p><img alt="image-20201109103500031" src="../image/Jmeter/40.png" /></p>
<p>默认这个 Same user on each iteration 的选项是勾选的。因为销毁和创建线程本身就会占用资源，可能会影响性能测试结果。</p>
<hr />
<p>首先，我们先简单的看一下cookie管理器是如何工作的。</p>
<p>此次示例，我构建了两个后端接口，如下：</p>
<p>登录接口：</p>
<div class="highlight"><pre><span></span><code><span class="nd">@api</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/login/&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;POST&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
    <span class="c1"># 获取请求体数据</span>
    <span class="n">user_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
    <span class="c1"># 判断请求体数据是否正确</span>
    <span class="k">if</span> <span class="s2">&quot;username&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">user_data</span> <span class="ow">or</span> <span class="s2">&quot;userpwd&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">user_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;The request body is error!&#39;</span><span class="p">})</span>
    <span class="c1"># 设置session值</span>
    <span class="n">username</span> <span class="o">=</span> <span class="n">user_data</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span>
    <span class="n">session</span><span class="p">[</span><span class="s1">&#39;username&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">username</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;Login successful&#39;</span><span class="p">})</span>
    <span class="c1"># 设置名为 &#39;username&#39; 的 Cookie，值为登录用户的用户名</span>
    <span class="n">response</span><span class="o">.</span><span class="n">set_cookie</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
    <span class="c1"># 返回cookie和响应数据</span>
    <span class="k">return</span> <span class="n">response</span>
</code></pre></div>
<hr />
<p>登录鉴权接口：</p>
<div class="highlight"><pre><span></span><code><span class="nd">@api</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s1">&#39;/login_authentication/&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GET&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">login_authentication</span><span class="p">():</span>
    <span class="c1"># 获取请求的cookie值</span>
    <span class="n">username_cookie</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">cookies</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
    <span class="c1"># 获取服务端session值</span>
    <span class="n">username_session</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
    <span class="c1"># 判断请求的cookie值是否与服务端的session一致，并返回对应的响应数据</span>
    <span class="k">if</span> <span class="n">username_cookie</span> <span class="ow">and</span> <span class="n">username_session</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">username_cookie</span> <span class="o">==</span> <span class="n">username_session</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;Cookie and Session are valid&#39;</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;Cookie or Session validation failed&#39;</span><span class="p">})</span>
</code></pre></div>
<hr />
<p>Jmeter脚本如下：</p>
<p>测试计划下添加一个线程组、一个查看结果树。</p>
<p>线程组下添加一个cookie管理器(右键线程组-添加-配置元件-HTTP Cookie管理器)、添加2个取样器。</p>
<hr />
<p>第一个取样器：</p>
<p>名称：</p>
<div class="highlight"><pre><span></span><code>登录
</code></pre></div>
<p>请求地址：</p>
<div class="highlight"><pre><span></span><code>```
HTTP://127.0.0.1:5000/login/
```
</code></pre></div>
<p>请求方式：</p>
<div class="highlight"><pre><span></span><code>POST
</code></pre></div>
<p>请求体数据：</p>
<div class="highlight"><pre><span></span><code>{&quot;username&quot;:&quot;jiang&quot;, &quot;userpwd&quot;:&quot;jiang123&quot;}
</code></pre></div>
<p>添加头信息管理器-添加信息头：</p>
<p>名称：</p>
<div class="highlight"><pre><span></span><code>Content-Type
</code></pre></div>
<p>值：</p>
<div class="highlight"><pre><span></span><code>application/json
</code></pre></div>
<hr />
<p>第二个取样器：</p>
<p>名称：</p>
<div class="highlight"><pre><span></span><code>登录鉴权
</code></pre></div>
<p>请求地址：</p>
<div class="highlight"><pre><span></span><code>HTTP://127.0.0.1:5000/login_authentication/
</code></pre></div>
<p>请求方式：</p>
<div class="highlight"><pre><span></span><code>GET
</code></pre></div>
<hr />
<p>运行后查看结果树：</p>
<p><img alt="" src="../image/JmeterGIF/1.gif" /></p>
<p>可以看出，第一个请求登录后，第二个请求中已经附带cookie信息。cookie管理器的作用就是保存响应中的cookie信息。</p>
<hr />
<p>简单介绍结束，接下来开始讲解 ’same user on each iteration‘。</p>
<hr />
<h6 id="_18">非参数化</h6>
<p>经过我的多次测试，这个选项充满了问题。</p>
<p>登录请求中请求参数固定，没有固定定时器延迟的情况下，多次循环、多个线程（用户）的session大概率一致。</p>
<p>添加固定定时器，输入延迟的情况下（大于1000毫秒），多次循环、多个线程（用户）的session大概率不一致。</p>
<p>测试的具体思路是：</p>
<p>上述后端接口不变，Jmeter脚本中：</p>
<hr />
<p>修改线程组控制面板中参数：</p>
<p>线程数（用户）：</p>
<div class="highlight"><pre><span></span><code>2
</code></pre></div>
<p>循环次数：</p>
<div class="highlight"><pre><span></span><code>2
</code></pre></div>
<p>勾选、不勾选’same user on each iteration‘。</p>
<hr />
<p>cookie管理器中：</p>
<p>勾选、不勾选 ’User Thread Group configuration to control cookie clearing’。</p>
<hr />
<p>线程组下添加、不添加固定定时器。</p>
<p>定时器可以设置线程延迟 3000毫秒。</p>
<hr />
<p>运行后查看结果树：</p>
<p>主要查看取样器结果中的线程以及请求中cookie内的session</p>
<hr />
<p>各种组合进行测试。</p>
<p>具体情况，读者可以自己进行测试。</p>
<hr />
<p><br></p>
<h6 id="_19">参数化</h6>
<hr />
<p>经过我的多次测试，只要登录接口使用了参数化，导致请求参数不一致，无论使不使用固定定时器，多少次循环，线程（用户）的session都不一致。</p>
<hr />
<p>在这里，使用CSV Data Set Config配置元件进行测试。</p>
<hr />
<p>后端接口不变，在Jmeter脚本的基础上，修改线程组控制面板中参数。</p>
<p>线程数（用户）：</p>
<p>循环次数：</p>
<div class="highlight"><pre><span></span><code>2
</code></pre></div>
<hr />
<p>线程组下添加CSV Data Set Config（右键线程组-添加-配置元件-CSV Data Set Config） 。</p>
<p>需要使用的csv文件：</p>
<p><a href="../text/user.csv">用户登录信息文件</a></p>
<p>CSV Data Set Config控制面板：</p>
<p>文件名：</p>
<div class="highlight"><pre><span></span><code>下载的用户登录信息文件的路径，可以点击浏览选中下载后的文件
</code></pre></div>
<p>文件编码：</p>
<div class="highlight"><pre><span></span><code>utf-8
</code></pre></div>
<p>变量名称：</p>
<div class="highlight"><pre><span></span><code>username
</code></pre></div>
<hr />
<p>修改登录鉴权取样器的名称：</p>
<div class="highlight"><pre><span></span><code>${username}-用户登录鉴权
</code></pre></div>
<p>这样改的用意是，可以在查看结果树中直观的看到是哪个用户的请求。</p>
<hr />
<p>在登录鉴权取样器下添加查看结果树</p>
<hr />
<p>运行后查看登录鉴权下结果树：</p>
<p><img alt="" src="../image/JmeterGIF/2.gif" /></p>
<p>可以看出十个用户的session值都不同。</p>
<hr />
<p>读者可以在上述的基础上，像非参数化一样，分别测试勾选 ’same user on each iteration‘与否、勾选’User Thread Group configuration to control cookie clearing’与否、添加固定定时器与否等情况。</p>
<hr />
<p>PS：</p>
<p>这一part中，我有很大可能出错，各位读者在使用时，一定要在浏览器上查询 ’same user on each iteration‘ 的使用方法，避免出错。如果我编辑的有错漏之处，请联系我，我去学习，并更正之。</p>
<hr />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod
nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor
massa, nec semper lorem quam in massa.</p>
</div>
<p>++ddd++</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023-2024 姜侠客
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://twitter.com/squidfunk" target="_blank" rel="noopener" title="squidfunk on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:admin@yiruru.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.7l167.6-182.9c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.indexes", "toc.follow", "navigation.top", "search.suggest", "search.highlight", "search.share", "header.autohide", "announce.dismiss"], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../javascripts/baidu-tongji.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>